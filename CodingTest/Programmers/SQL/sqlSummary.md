# SELECT

## 모든 레코드 조회하기

~~~sql
SELECT * FROM ANIMAL_INS
ORDER BY ANIMAL_ID
~~~

## 역순 정렬하기

~~~sql
SELECT A.NAME, A.DATETIME
FROM ANIMAL_INS A
ORDER BY A.ANIMAL_ID DESC
~~~

## 아픈 동물 찾기

~~~sql
SELECT ANIMAL_ID, NAME
FROM ANIMAL_INS
WHERE INTAKE_CONDITION = "Sick"
~~~

## 어린 동물 찾기

~~~sql
SELECT ANIMAL_ID, NAME
FROM ANIMAL_INS
WHERE INTAKE_CONDITION != 'Aged'
ORDER BY ANIMAL_ID
~~~

## 동물의 아이디와 이름

~~~sql
SELECT ANIMAL_ID, NAME
FROM ANIMAL_INS
~~~

## 여러 기준으로 정렬하기

~~~sql
SELECT ANIMAL_ID, NAME, DATETIME
FROM ANIMAL_INS
ORDER BY NAME ASC, DATETIME DESC
~~~

## 상위 n개 레코드

~~~sql
SELECT NAME
FROM ANIMAL_INS
ORDER BY DATETIME
LIMIT 1
~~~

# SUM, MAX, MIN

## 최댓값 구하기
~~~sql
SELECT MAX(DATETIME) FROM ANIMAL_INS
~~~

## 최솟값 구하기

~~~sql
SELECT MIN(DATETIME) AS 시간
FROM ANIMAL_INS
~~~

## 동물의 수 구하기

~~~sql
SELECT COUNT(ANIMAL_ID) AS count
FROM ANIMAL_INS
~~~

## 중복 제거하기

~~~sql
SELECT COUNT(DISTINCT NAME) AS count
FROM ANIMAL_INS
~~~

# GROUP BY

## 고양이와 개는 몇 마리 있을까

~~~sql
SELECT ANIMAL_TYPE, COUNT(ANIMAL_TYPE) AS count
FROM ANIMAL_INS
GROUP BY ANIMAL_TYPE
ORDER BY ANUMAL_TYPE ASC
~~~

## 동명 동물 수 찾기

~~~sql
SELECT NAME, COUNT(*) AS COUNT
FROM ANIMAL_INS
GROUP BY NAME
HAVING COUNT(NAME) >= 2
ORDER BY NAME
~~~

## 입양 시각 구하기(1)

~~~sql
SELECT HOUR(DATETIME) AS HOUR, COUNT(DATETIME) AS COUNT
FROM ANIMAL_OUTS
WHERE HOUR(DATETIME) >= 9 AND HOUR(DATETIME) <= 19
GROUP BY HOUR(DATETIME)
ORDER BY HOUR(DATETIME)
~~~

## 입양 시각 구하기(2)

~~~sql
SET @HOUR_LIST = -1;

SELECT (@HOUR_LIST := @HOUR_LIST + 1) AS HOUR, 
(SELECT COUNT(*) FROM ANIMAL_OUTS WHERE HOUR(DATETIME) =@HOUR_LIST) AS 'COUNT'

FROM ANIMAL_OUTS
WHERE @HOUR_LIST < 23
~~~

# IS NULL

## 이름이 없는 동물의 아이디

~~~sql
SELECT ANIMAL_ID
FROM ANIMAL_INS A
WHERE A.NAME IS NULL
~~~

## 이름이 있는 동물의 아이디

~~~sql
SELECT A.ANIMAL_ID
FROM ANIMAL_INS A
WHERE A.NAME IS NOT NULL
~~~

# JOIN

## 없어진 기록 찾기

~~~sql
SELECT A.ANIMAL_ID, A.NAME
FROM ANIMAL_OUTS A
LEFT JOIN ANIMAL_INS B
ON A.ANIMAL_ID = B.ANIMAL_ID
WHERE B.ANIMAL_ID IS NULL
ORDER BY A.ANIMAL_ID
~~~

## 있었는데요 없었습니다

~~~sql
SELECT A.ANIMAL_ID, A.NAME
FROM ANIMAL_INS A, ANIMAL_OUTS B
WHERE A.ANIMAL_ID = B.ANIMAL_ID AND A.DATETIME > B.DATETIME
ORDER BY A.DATETIME
~~~

## 오랜 기간 보호한 동물(1)

~~~sql
SELECT A.NAME, A.DATETIME
FROM ANIMAL_INS.A LEFT JOIN ANIMAL_OUTS.B ON A.ANIMAL_ID = B.ANIMAL_ID
WHERE B.ANIMAL_ID IS NULL
ORDER BY A.DATETIME
LIMIT 3
~~~

## 보호소에서 중성화한 동물

~~~sql
SELECT A.ANIMAL_ID, A.ANIMAL_TYPE, A.NAME
FROM ANIMAL_INS A LEFT JOIN ANIMAL_OUTS B ON A.ANIMAL_ID = B.ANIMAL_ID
WHERE A.SEX_UPON_INTAKE LIKE "%Intact%" AND B.SEX_UPON_OUTCOME NOT LIKE "%Intact%"
ORDER BY A.ANIMAL_ID
~~~

## 어느 지점이 제일 많이 팔았을까?

~~~sql
SELECT A.BRANCH_ID, COUNT(B.CAR_ID) AS '계약 건수'
FROM EMPLOYEES A LEFT JOIN SELLINGS B ON A.ID = B.EMPLOYEE_ID
GROUP BY A.BRANCH_ID
ORDER BY A.BRANCH_ID
~~~