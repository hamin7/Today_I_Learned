# 02. 인터페이스 기능 구현

## 1. 개요, 내부 클래스의 동작, 인터페이스를 통해 외부와 통신하는 명세를 정의하는 명세서는 어떤 명세서인가?

→ 컴포넌트 명세서

- 컴포넌트 명세서는 컴포넌트의 개요, 내부 클래스의 동작, 인터페이스를 통해 외부와 통신하는 명세를 정의한다.

## 2. 인터페이스 기능 구현

순서|프로세스|설명
-|-|-
1|모듈 간 세부 설계서 확인|- 각 모듈의 컴포넌트 명세서와 인터페이스 명세서 등 세부 설계서를 확인하여 인터페이스에 필요한 기능을 확인한다.
2|일관되고 정형화된 인터페이스 기능 정의|- 분석된 인터페이스의 기능. 데이터 표준, 모듈 설계 명세서를 통하여 일관되고 정형화된 인터페이스의 기능을 정의한다.
3|정의된 인터페이스 기능에 대한 정형화|- 정의된 인터페이스 기능을 표준화하고, 사람들이 보기 쉽게 정형화한다.<br>- 특정 하드웨어나 소프트웨어에 의존적이지 않게 작성하고, 가독성을 높이기 위해 프로세스 형태나 유즈케이스 다이어그램 형태로 작성하는 것이 필요하다.

## 3. 인터페이스 기능

<table>
    <thead>
        <td>프로세스</td>
        <td>기능</td>
        <td>설명</td>
    </thead>
    <tr>
        <td rowspan=5>필요 항목에 대해서 데이터를 전달</td>
        <td>인터페이스 데이터 전송</td>
        <td>- 수신지 주소에 레스트(REST) 방식으로 전달될 수도 있으며 DB 커넥션을 이용하여 DB 프로시저, 트리거 등을 활용하여 전송</td>
    </tr>
    <tr>
        <td>인터페이스 데이터 수신</td>
        <td>- 인터페이스 데이터를 수신하고 데이터의 형식이 맞는지 점검<br>- 각 규칙을 사전에 정의하고 이를 활용</td>
    </tr>
    <tr>
        <td>인터페이스 데이터 파싱</td>
        <td>- 인터페이스 객체를 파서를 이용하여 파싱하거나 인터페이스 테이블에서 선택</td>
    </tr>
    <tr>
        <td>인터페이스 데이터 검증</td>
        <td>- 각 세부 데이터의 포맷과 논리적인 제약조건의 오류 검사</td>
    </tr>
    <tr>
        <td>인터페이스 데이터 검증</td>
        <td>- 각 세부 데이터의 포맷과 논리적인 제약조건의 오류 검사</td>
    </tr>
    <tr>
        <td>후속 기능 수행</td>
        <td>- 각 세부 데이터를 활용해서 수신 시스템에서 정의된 동작을 진행</td>
    </tr>
</table>

## 4. 인터페이스 구현 방법

<table>
    <tr>
        <td>데이터 통신을 사용하여 인터페이스를 구현하는 방법</td>
        <td>- 인터페이스 객체를 생성하기 위해서 데이터베이스에 있는 정보를 SQL 을 통하여 선택한 후 이를 JSON으로 생성<br>- 송신 측에서 JSON으로 작성된 인터페이스 객체를 AJAX 기술을 이용하여 수신 측에 송신</td>
    </tr>
    <tr>
        <td>인터페이스 객체를 사용하여 인터페이스를 구현하는 방법</td>
        <td>- 인터페이스 이벤트 발생 시 인터페이스 테이블에 인터페이스 테이블에 인터페이스 내용이 기록되도록 구현<br>- 데이터 전송을 위해서 DB 커넥션 (DB Connection)이 수신 측 인터페이스 테이블과 연계되도록 구현<br>- 프로시저(Procedure), 트리거(Trigger), 배치 작업(Batch job) 등의 방법을 통해서 수신 테이블로 데이터를 전송</td>
    </tr>
</table>

## 5. 인터페이스 객체를 사용하는 송신 인터페이스 테이블에서 예외 처리 사례

프로세스|예외 원인|예외 처리 방안
-|-|-
인터페이스 데이터 생성|선택 SQL, 프로그램 오류 데이터 객체 생성 오류|- 사용자에게 오류 발생 시 알람(오류 원인을 포함)<br>- 예외 케이스가 재발하지 않도록 프로그램 개선
인터페이스 테이블 입력|입력 SQL 오류 데이터 정합성 오류|- 입력 실패 결과와 원인을 인터페이스 테이블에 기록<br>- 사용자에게 실패 결과 알림<br>- 예외 케이스를 분석하여 발생하지 않도록 프로그램 개선

## 6. 시큐어 코딩 가이드의 적용 대상인 입력데이터 검증 및 표현에 대한 보안 약점과 대응 방안은?

### 1. 보안 약점
- 프로그램 입력값에 대한 검증 누락, 부적절한 검증, 잘못된 형식 지정 시 보안 약점 발생

### 2. 대응 방안
- 사용자, 프로그램 입력데이터에 대한 유효성 검증 체계를 수립하고 실패 시 처리할 수 있도록 설계하고 구현

## 7. 인터페이스 개발 시 보안 취약점을 방지하기 위한 시큐어 코딩 가이드 적용대상

- 입력데이터 검증 및 표현
- 보안 기능
- 시간 및 상태
- 에러처리
- 코드 오류
- 캡슐화
- API 오용

→ 입보시 에코캡아

## 8. 데이터베이스 암호화 알고리즘

암호화 알고리즘|설명
-|-
비대칭 키 암호화 알고리즘|공개키는 누구나 알 수 있지만, 그에 대응하는 비밀키는 키의 소유자만이 알 수 있도록, 공개키와 비밀키를 사용하는 알고리즘<br>ex) RSA, ECC, ECDSA
해시 암호화 알고리즘|해시값으로 원래 입력 값을 찾아낼 수 없는 일방향성의 특성을 가진 알고리즘<br>- SHA-256/384/512, HAS-160

- 비대칭키 암호화 알고리즘은 각기 다른 암복호키를 통한 암호화 알고리즘이다.
- 비대칭키 암호화 알고리즘은 암호화 key != 복호화 key이다.
- 비대칭키 암호화 알고리즘은 공개키와 비공개키를 생성하여 자신의 공개키를 디렉토리에 등록한다.

## 9. 데이터베이스 암호화 기법

구분|설명
-|-
API 방식|- 애플리케이션 레벨에서 암호 모듈을 적용하는 애플리케이션 수정 방식<br>- 애플리케이션 서버에 암,복호화, 정책 관리, 키 관리 등의 부하 발생
Plug-in 방식|- DB 레벨의 확장성 프로시저 기능을 이용, DBMS에 Plug-in 모듈로 동작하는 방식<br>- DB 서버에 암,복호화, 정책 관리, 키 관리 등의 부하 발생
Hybrid 방식|- API 방식과 Plug-in 방식을 결합하는 방식<br>- DB 서버와 애플리케이션 서버로 부하 분산

- 데이터베이스 암호화 기법 중에서 API 방식은 애플리케이션 레벨에서 암호 모듈(API)을 적용하는 애플리케이션 수정 방식이다.

## 10. 애플리케이션 보안 기능
보안 요구사항|보안 기능 적용
-|-
비인가자 접근 권한 관리|- 객체 접근 권한을 고려하여 비인가자 접근이 제한되도록 구현<br>- 변수를 직접 처리할 수 없게 하고 접근 권한을 가진 함수(메서드)만 접근할 수 있게 구현
악의적 코드 삽입 금지|- 특수 문자를 통한 SQL 변조 시도 등 악의적인 공격 패턴을 입력하지 못하도록 사전 방지
악의적 시도 시 에러처리|- 악의적 공격 시도 시 사용자 정의 예외 처리를 적용하고 에러처리 내용이 외부에서 조회되지 않도록 권한 관리 강화

- 애플리케이션 보안 기능 중 악의적 코드 삽입 금지에 대한 보안 요구사항을 충족하기 위해서 특수 문자를 통한 SQL 변조 시도 등 악의적인 공격 패턴을 입력하지 못하도록 사전에 필터링 등의 기능을 통해 방지해야 한다.